{"id":"last-card-0z6","title":"The right of reply is the player's turn","description":"If the player has a right of reply on an activated Ace, 2,5,7,10 or Jack, deflecting or cancelling the activated card should end their turn. So should accepting the action, eg the player can't do anything to stop the action. Currently this isn't happening. Currently the player gets a right of reply and then another turn. So eg a skip a turn from an activated 10 doesn't actually result in a skipped turn.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-27T21:47:42.637327+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-27T22:12:59.838804+11:00","closed_at":"2026-01-27T22:12:59.838804+11:00","close_reason":"Fixed applyResolve to skip the responder when accepting a 10 skip effect. Now advances to next player instead of giving responder a turn."}
{"id":"last-card-103","title":"Integrate multiplayer with game store","description":"Update gameStore.ts or create multiplayerStore.ts to: replace direct applyPlay() calls with socket emissions in multiplayer mode, receive and apply state updates from server, handle optimistic updates with rollback on rejection. Maintain compatibility with local/hotseat play.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T06:51:42.877437+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T06:51:42.877437+11:00","dependencies":[{"issue_id":"last-card-103","depends_on_id":"last-card-nqi","type":"blocks","created_at":"2026-01-28T06:53:03.441373+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"},{"issue_id":"last-card-103","depends_on_id":"last-card-260","type":"blocks","created_at":"2026-01-28T06:53:03.58931+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"}]}
{"id":"last-card-1jk","title":"Implement game room server logic","description":"Implement /party/game.ts with full room logic: handle player join/leave, game configuration by host, game code generation (4-char), track lobby state vs playing state, integrate game engine for move validation, broadcast state updates to all clients. Support AI slots.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T06:51:13.541434+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T06:51:13.541434+11:00","dependencies":[{"issue_id":"last-card-1jk","depends_on_id":"last-card-o5x","type":"blocks","created_at":"2026-01-28T06:52:55.015489+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"},{"issue_id":"last-card-1jk","depends_on_id":"last-card-260","type":"blocks","created_at":"2026-01-28T06:52:55.172544+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"}]}
{"id":"last-card-1s4","title":"Support multiplayer online","description":"Support 1-4 players playing against each other online, with 1-2 AI opponents.","status":"in_progress","priority":2,"issue_type":"epic","created_at":"2026-01-27T22:26:07.28813+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T07:06:06.787567+11:00"}
{"id":"last-card-260","title":"Define message protocol types","description":"Create TypeScript types for all client-server messages in /src/lib/party/messages.ts. Include: join, setName, configureGame, startGame, playAction, leaveGame (client→server) and lobby, gameState, playerJoined, playerLeft, error, stateUpdate, gameEnded (server→client).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T06:50:57.03648+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T07:06:16.235557+11:00","closed_at":"2026-01-28T07:06:16.235557+11:00","close_reason":"Created comprehensive message protocol types in src/lib/party/messages.ts covering all client-server communication: join, game actions, responses, state updates, errors.","dependencies":[{"issue_id":"last-card-260","depends_on_id":"last-card-o5x","type":"blocks","created_at":"2026-01-28T06:52:54.861875+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"}]}
{"id":"last-card-2uz","title":"Aces can be played on aces","description":"Aces can be played on Aces because they are the same rank. \nIf Player 1 plays an ace of hearts and changes the suit to diamonds, the next player can place an ace of diamonds, clubs or spades to change the suit to any of the 4 suits. Because you can play a card of a rank matching the top of the discard pile.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-27T22:41:02.328127+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T06:28:02.275885+11:00","closed_at":"2026-01-28T06:28:02.275885+11:00","close_reason":"Fixed by preventing Aces from matching other Aces by rank. Now Aces can only be played on Aces if the effective suit matches."}
{"id":"last-card-3ri","title":"When direction is changed, after the right of reply the next turn is the next player in the new direction from the player who played the Jack","description":"If direction of play is clockwise and Player 1 plays an activated Jack, Player 2 has a right of reply. If they can't or don't cancel the switch direction, then the expected result is for the next player in the counter-clockwise from Player 1 to have the next turn which would be player 4 in a 4 player game or player 3 in a 3 player game. The actual result is that player 1 gets another turn, presumably because the direction is switched from Player 2's position onward, not the player who originally played the Jack.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T22:21:48.14008+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-27T22:30:13.474343+11:00","closed_at":"2026-01-27T22:30:13.474343+11:00","close_reason":"Fixed applyJackAccept to calculate next player from the Jack player, not the responder. Now correctly goes to P3 in a 4-player game when P0 plays Jack and P1 accepts."}
{"id":"last-card-54p","title":"Handle reconnection and recovery","description":"Implement reconnection handling: detect disconnection (show 'Reconnecting...' overlay), grace period for reconnection (30s), restore player to game on reconnect using stored player ID, sync full game state to reconnected client. Handle permanent disconnection (AI takeover or forfeit).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T06:51:59.016146+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T06:51:59.016146+11:00","dependencies":[{"issue_id":"last-card-54p","depends_on_id":"last-card-nqi","type":"blocks","created_at":"2026-01-28T06:53:10.894555+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"},{"issue_id":"last-card-54p","depends_on_id":"last-card-1jk","type":"blocks","created_at":"2026-01-28T06:53:11.036486+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"}]}
{"id":"last-card-684","title":"Implement random matchmaking","description":"Add Quick Play functionality: server tracks list of open (not started, not full) games, Quick Play joins random open game or creates new one if none available, mark games as open/closed based on state. Simple implementation - no skill-based matching.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T06:52:14.546855+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T06:52:14.546855+11:00","dependencies":[{"issue_id":"last-card-684","depends_on_id":"last-card-1jk","type":"blocks","created_at":"2026-01-28T06:53:17.820512+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"},{"issue_id":"last-card-684","depends_on_id":"last-card-cbv","type":"blocks","created_at":"2026-01-28T06:53:17.97145+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"}]}
{"id":"last-card-9v2","title":"Shouldn't see other players hands if opposing players are AI","description":"If I play against 1-3 AI opponents, when it is their turn I am able to see their cards. Each Player should only see their own cards. When AI opponents are playing show the active player's hand with the cards face down, and only the cards in the discard pile should be visible","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-27T21:39:02.719837+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-27T21:41:17.086132+11:00","closed_at":"2026-01-27T21:41:17.086132+11:00","close_reason":"Added faceDown prop to Hand component and show AI hands face-down in GameBoard"}
{"id":"last-card-9z6","title":"Add connection status indicator","description":"Create /src/components/ConnectionStatus.tsx to show network status: connected (green), connecting (yellow), disconnected (red with reconnecting message). Display in corner during online games. Show latency/ping optionally.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-28T06:52:21.934752+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T06:52:21.934752+11:00","dependencies":[{"issue_id":"last-card-9z6","depends_on_id":"last-card-nqi","type":"blocks","created_at":"2026-01-28T06:53:18.110689+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"}]}
{"id":"last-card-cbv","title":"Add multiplayer routes and pages","description":"Create Next.js pages: /play/[code]/page.tsx for game room (by code), /lobby/page.tsx for browsing/creating games. Update home page to offer Local Play vs Online Play choice. Handle URL-based game joining (share link with code).","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T06:52:07.010696+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T06:52:07.010696+11:00","dependencies":[{"issue_id":"last-card-cbv","depends_on_id":"last-card-tqx","type":"blocks","created_at":"2026-01-28T06:53:10.259146+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"},{"issue_id":"last-card-cbv","depends_on_id":"last-card-rcz","type":"blocks","created_at":"2026-01-28T06:53:10.423742+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"}]}
{"id":"last-card-ctj","title":"Fix 7 Cancel chain not ending bug","description":"I played an activated 10 and made my AI opponent in a 2 player game miss a turn. The AI opponent responded with a 7 and cancelled my action, meaning it was my turn again. Then I was unable to do anything. I could select cards to play but not click the play selected or draw card buttons. no action was possible.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T18:57:30.414346+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-27T21:25:55.103393+11:00","closed_at":"2026-01-27T21:25:55.103393+11:00","close_reason":"Fixed by adding nextTurn call after applySevenDisputeAccept when turnPhase is 'can-end'. The bug occurred because after accepting a Seven Dispute (EFFECT type with cancelled=true), the game state had turnPhase='can-end' but no mechanism to advance to the next turn, leaving the UI in an unresponsive state."}
{"id":"last-card-ev5","title":"Jack can be deactivated","description":"When I play a Jack, as with other power cards such as 2,5,10 and Ace, I should be able to deactivate it so that the switch direction action is not invoked","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-27T22:31:33.06356+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T06:38:59.698896+11:00","closed_at":"2026-01-28T06:38:59.698896+11:00","close_reason":"Fixed in commit 77a8fe2 - hasSpecialCardSelected() now includes Jack for 3+ player games, enabling the Activate Effect toggle in the UI"}
{"id":"last-card-mfk","title":"Create player identity system","description":"Create /src/lib/player/identity.ts to manage player identification. Generate random player ID on first visit (store in localStorage). Manage display name (required, stored in localStorage). Provide hooks/functions to get/set player identity.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T06:51:04.850839+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T07:00:47.681728+11:00","closed_at":"2026-01-28T07:00:47.681728+11:00","close_reason":"Created /src/lib/player/identity.ts with player ID generation, display name management, localStorage persistence, validation, and usePlayerIdentity React hook"}
{"id":"last-card-nqi","title":"Create Partykit client hooks","description":"Create React hooks in /src/lib/party/hooks.ts: usePartySocket (connection management), useGameRoom (game-specific state and actions). Handle connection status, reconnection, and expose methods for sending messages.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T06:51:20.435614+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T06:51:20.435614+11:00","dependencies":[{"issue_id":"last-card-nqi","depends_on_id":"last-card-o5x","type":"blocks","created_at":"2026-01-28T06:52:55.324871+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"},{"issue_id":"last-card-nqi","depends_on_id":"last-card-260","type":"blocks","created_at":"2026-01-28T06:52:55.487003+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"}]}
{"id":"last-card-o5x","title":"Set up Partykit infrastructure","description":"Install partykit and partysocket dependencies. Create partykit.json config. Set up basic party server in /party/game.ts that handles connections.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T06:50:49.332067+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T07:00:27.909259+11:00","closed_at":"2026-01-28T07:00:27.909259+11:00","close_reason":"Installed partykit, partysocket, nanoid. Created partykit.json config and basic game room server in party/game.ts with connection handling, player join/leave, and broadcasting."}
{"id":"last-card-rcz","title":"Build game lobby UI","description":"Create /src/components/Lobby.tsx for the waiting room before game starts. Show game code prominently (shareable), list connected players with names, host controls (set player count 2-4, add/remove AI, kick players), Start Game button (host only, 2+ players). Leave button for non-hosts.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T06:51:35.278862+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T06:51:35.278862+11:00","dependencies":[{"issue_id":"last-card-rcz","depends_on_id":"last-card-nqi","type":"blocks","created_at":"2026-01-28T06:53:03.293721+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"}]}
{"id":"last-card-rig","title":"Human offered right of reply instead of AI","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-27T22:08:09.670695+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-27T22:09:28.209056+11:00","closed_at":"2026-01-27T22:09:28.209056+11:00","close_reason":"Fixed isActivePlayerAi() to check JackResponse and AceResponse phases, matching getActivePlayerIndex()"}
{"id":"last-card-tqx","title":"Build multiplayer setup screen","description":"Create /src/components/MultiplayerSetup.tsx with three entry points: 'Create Game' (generates code, user is host), 'Join by Code' (enter code input), 'Quick Play' (join random open game or create new). Include display name input. Style consistent with existing GameBoard setup screen.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T06:51:27.924755+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T06:51:27.924755+11:00","dependencies":[{"issue_id":"last-card-tqx","depends_on_id":"last-card-mfk","type":"blocks","created_at":"2026-01-28T06:53:02.978665+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"},{"issue_id":"last-card-tqx","depends_on_id":"last-card-nqi","type":"blocks","created_at":"2026-01-28T06:53:03.141234+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"}]}
{"id":"last-card-ue2","title":"Instructions","description":"Create a How to Play guide and link prominently from the start screen with a nice button. Also include a link to this on the bottom right of the playing screen using a button, so players can always access it when it's their turn.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-27T22:25:12.613027+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T06:30:16.902939+11:00","closed_at":"2026-01-28T06:30:16.902939+11:00","close_reason":"Added HowToPlay modal with game rules accessible from setup screen and during gameplay"}
{"id":"last-card-ylj","title":"Add turn timers","description":"Implement turn timeout system: configurable turn timeout (30s default), shorter timer for response phases (15s), visual countdown in UI, warning at 10s remaining, auto-action on timeout (draw if possible, else forfeit turn). Timer runs server-side to prevent cheating.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-28T06:51:51.161044+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”","updated_at":"2026-01-28T06:51:51.161044+11:00","dependencies":[{"issue_id":"last-card-ylj","depends_on_id":"last-card-1jk","type":"blocks","created_at":"2026-01-28T06:53:10.571681+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"},{"issue_id":"last-card-ylj","depends_on_id":"last-card-103","type":"blocks","created_at":"2026-01-28T06:53:10.718894+11:00","created_by":"reubenschwarz”\ngit config --global user.email reuben.schwarz@gmail.com”"}]}
